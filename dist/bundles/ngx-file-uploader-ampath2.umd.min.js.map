{"version":3,"sources":["ng://ngx-file-uploader-ampath2/lib/ngx-file-uploader.service.ts","ng://ngx-file-uploader-ampath2/lib/ngx-file-uploader.component.ts","null","ng://ngx-file-uploader-ampath2/lib/ngx-file-uploader.module.ts"],"names":["NgxFileUploaderService","Injectable","args","providedIn","noop","NgxFileUploaderComponent","this","urls","Array","selectFileType","fileList","message","liveCamera","pdfAvailable","mobile","UploadCaptions","multiple","fileUpload","merge","backButton","fileChanged","EventEmitter","uploadData","_onClear","showWebcam","allowCameraSwitch","multipleWebcamsAvailable","videoOptions","errors","webcamImage","trigger","Subject","nextWebcam","uploading","innerValue","onTouchedCallback","onChangeCallback","prototype","ngOnInit","_this","singleFile","window","screen","width","WebcamUtil","getAvailableVideoInputs","then","mediaDevices","length","Object","defineProperty","v","writeValue","value","registerOnChange","fn","registerOnTouched","onBlur","onChange","event","files","srcElement","file","fileReader","FileReader","onload","fileLoadedEvent","data","result","name","fileSize","Math","round","size","payload","id","emit","back","push","readAsDataURL","files_1","__values","o","m","Symbol","iterator","i","call","next","done","tslib_1.__values","files_1_1","clear","toggleVisibility","filetype","fileType","upload","formEntry","MergeImages","doc","jsPDF","compress","page","imageData","imageAsDataUrl","addImage","undefined","setFont","setFontType","text","addPage","setProperties","title","author","creator","deletePage","output","replace","delete","splice","re","index","search","triggerSnapshot","toggleWebcam","handleInitError","error","showNextWebcam","directionOrDeviceId","handleImage","pushData","cameraWasSwitched","deviceId","asObservable","Component","selector","template","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","Input","Output","NgxFileUploaderModule","NgModule","imports","CommonModule","FormsModule","WebcamModule","declarations","exports"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxFileUploaderService {\r\n\r\n  constructor() { }\r\n}\r\n","import {\n  Component, OnInit, Input, forwardRef,\n  OnChanges, Output, EventEmitter, ÉµConsole\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n// import * as pdfMake from 'pdfmake/build/pdfmake';\nimport jsPDF from 'jspdf';\nimport { Subject } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { WebcamImage, WebcamInitError, WebcamUtil } from 'ngx-webcam';\n\nconst noop = () => {\n  // placeholder call backs\n};\n\n@Component({\n  selector: 'lib-file-uploader',\n  styles: [`.btn-file{position:relative;overflow:hidden}.btn-file input[type=file]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;font-size:100px;text-align:right;opacity:0;outline:0;background:#fff;cursor:inherit;display:block}#img-upload{width:100%}.image-preview-input input[type=file]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-upload{background-color:#fff;width:600px;margin:0 auto;padding:20px}.file-upload-btn{width:100%;margin:0;color:#fff;background:#1fb264;border:none;padding:10px;border-radius:4px;border-bottom:4px solid #15824b;transition:.2s;outline:0;text-transform:uppercase;font-weight:700}ul{list-style-type:none;margin:0;padding:0}.file-upload-btn:hover{background:#1aa059;color:#fff;transition:.2s;cursor:pointer}.file-upload-btn:active{border:0;transition:.2s}.file-upload-content{display:none;text-align:center}.file-upload-input{position:absolute;margin:0;padding:0;width:100%;height:100%;outline:0;opacity:0;cursor:pointer}.image-upload-wrap{margin-top:20px;border:4px dashed #3683c7;position:relative}.image-dropping,.image-upload-wrap:hover{background-color:#337ab7;border:4px dashed #fff}.image-title-wrap{padding:0 15px 15px;color:#222}.drag-text{text-align:center}.drag-text h3{font-weight:100;text-transform:uppercase;color:#155a82;padding:60px 0}.file-upload-image{max-height:200px;max-width:200px;margin:auto;padding:20px}.button{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-color:#004a7f;border:none;color:#fff;text-decoration:none;-webkit-animation:1.5s infinite glowing;animation:1.5s infinite glowing}@-webkit-keyframes glowing{0%{background-color:#002fb2;-webkit-box-shadow:0 0 3px #005cb2}50%{background-color:#203864;-webkit-box-shadow:0 0 40px #203864}100%{background-color:#005cb2;-webkit-box-shadow:0 0 3px #005cb2}}@keyframes glowing{0%,100%{background-color:#005cb2;box-shadow:0 0 3px #005cb2}50%{background-color:#203864;box-shadow:0 0 40px #203864}}.actionBtn{margin-top:5px;margin-bottom:2px;font-size:1.2em}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700;margin-right:10px}.row-cb{margin:auto;font-size:15px}.row-cb label{float:left}.row-cb span{float:left;text-align:left}.snapshot{text-align:center}.snapshot img{max-width:800px;max-height:800px}.columne#caption .text h1{margin:0;color:#fff}.columne#caption:hover .text{opacity:1;cursor:pointer;opacity:1}.columne#caption{position:relative}.columne#caption .text{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10;opacity:0;transition:.8s}.columne#caption:hover img{-webkit-filter:blur(4px);filter:blur(4px)}@media (max-width:629px){.file-upload-input{display:none!important}}`],\n  template: `<div *ngIf=\"message\" class=\"alert alert-success alert-dismissible\" role=\"alert\">\r\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span\r\n        aria-hidden=\"true\">&times;</span></button> {{message}}\r\n  </div>\r\n<div *ngIf=\"backButton\">\r\n  <button class=\"btn btn-default image-preview-primary\" type=\"button\" (click)=\"back()\" >\r\n    <span class=\"glyphicon glyphicon-circle-arrow-left\"></span> Back\r\n</button>\r\n</div>\r\n<div *ngIf=\"selectFileType\" class=\"panel panel-primary\">\r\n    <input type=\"text\" class=\"form-control\" readonly [(ngModel)]=\"value\">\r\n  <div class=\"panel-heading\">UPLOAD FILE TYPE</div>\r\n  <div class=\"panel-body\">\r\n    <div class=\"row-cb\">\r\n      <span><input name=\"image\" id=\"ima\" (change)=\"toggleVisibility('image')\" type=\"checkbox\" /></span>\r\n      <label for=\"ima\">Image</label>\r\n\r\n      <div class=\"clear-both\"></div>\r\n</div>\r\n<div class=\"row-cb\">\r\n  <span><input name=\"option\" id=\"pdf\" (change)=\"toggleVisibility('pdf')\" type=\"checkbox\" /></span>\r\n  <label for=\"pdf\">PDF</label>\r\n\r\n  <div class=\"clear-both\"></div>\r\n</div>\r\n<div *ngIf=\"!singleFile\" class=\"row-cb\">\r\n  <span><input name=\"option\" id=\"both\" (change)=\"toggleVisibility('both')\" type=\"checkbox\" /></span>\r\n  <label  for=\"both\">Image & PDF</label>\r\n\r\n  <div class=\"clear-both\"></div>\r\n</div>\r\n<div class=\"row-cb\">\r\n  <span><input name=\"camera\" id=\"camera\" (change)=\"toggleVisibility('liveCamera')\" type=\"checkbox\" /></span>\r\n  <label for=\"camera\" >Live Camera</label>\r\n\r\n  <div class=\"clear-both\"></div>\r\n</div>\r\n  </div>\r\n</div>\r\n<div [hidden]=\"!urls[0]\" class=\"panel panel-primary\">\r\n  <div class=\"panel-heading\">SELECTED FILES</div>\r\n  <div class=\"panel-body\">\r\n      <div style=\"display: inline-block;\" *ngFor=\"let url of urls;let i=index\">\r\n          <a class = \"columne\" id = \"caption\">\r\n           <img style=\" border: 1px solid rgb(97, 97, 97); margin: 2px; border-radius: 4px;padding: 5px;\" id=\"img{{i}}\" [src]=\"url.data || url.imageAsDataUrl\" \r\n           onError=\"this.onerror=null;this.src='https://store-images.s-microsoft.com/image/apps.34961.13510798887621962.47b62c4c-a0c6-4e3c-87bb-509317d9c364.a6354b48-c68a-47fa-b69e-4cb592d42ffc?mode=scale&q=90&h=300&w=300' ;\" class=\"rounded mb-3\" width=\"100\" height=\"200\">\r\n           <div class=\"text\"><h2 title=\"Click to Delete File {{url.name}}\" (click)=\"delete(url)\"  style=\"color: red; font-family: fantasy;\"><span class=\"glyphicon glyphicon-trash\"></span>REMOVE</h2></div>\r\n          </a>\r\n         </div>\r\n    </div>\r\n    <div class=\"panel-footer\">\r\n        <!-- <button *ngIf=\"UploadCaptions\" type=\"button\" (click)=\"upload()\" class=\"button\">\r\n            <span class=\"glyphicon glyphicon-upload\"></span> Upload Files\r\n        </button> -->\r\n        <button *ngIf=\"!pdfAvailable && fileUpload || liveCamera || merge\" type=\"button\" [disabled]=\"!urls[1]\" (click)=\"MergeImages()\"  title=\"merge the images as pages in one pdf document\"  class=\"btn btn-default image-preview-clear\">\r\n          <span class=\"glyphicon glyphicon-upload\"></span> Merge\r\n        </button>\r\n    </div>\r\n</div>\r\n<div *ngIf=\"fileUpload\">\r\n\r\n  <div class=\"input-group\">\r\n    <input type=\"text\" class=\"form-control\" readonly [(ngModel)]=\"value\">\r\n    <div class=\"input-group-btn\">\r\n\r\n      <div class=\"btn btn-default image-preview-input\">\r\n        <span class=\"glyphicon glyphicon-folder-open\"></span>\r\n        <span class=\"image-preview-input-title\">SELECT FILE</span>\r\n        <input *ngIf=\"multiple\" type=\"file\" multiple accept=\"{{fileType}}\" (blur)=\"onBlur()\" name=\"input-file-preview\" (change)=\"onChange($event)\"\r\n        /> \r\n        <input *ngIf=\"!multiple\" type=\"file\" accept=\"{{fileType}}\" (blur)=\"onBlur()\" name=\"input-file-preview\" (change)=\"onChange($event)\"\r\n        /> \r\n      </div>\r\n      <button *ngIf=\"value\" type=\"button\" (click)=\"clear()\" class=\"btn btn-default image-preview-clear\">\r\n                        <span class=\"glyphicon glyphicon-remove\"></span> Clear\r\n    </button>\r\n    <button *ngIf=\"multiple\" type=\"button\" (click)=\"upload()\" class=\"button\">\r\n      <span class=\"glyphicon glyphicon-upload\"></span> Upload\r\n</button>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"!mobile\" class=\"image-upload-wrap\">\r\n    <input *ngIf=\"multiple\" class=\"file-upload-input\" type='file' (change)=\"onChange($event)\" multiple accept=\"{{fileType}}\" />\r\n    <input *ngIf=\"!multiple\" class=\"file-upload-input\" type='file' (change)=\"onChange($event)\" accept=\"{{fileType}}\" />\r\n    <div class=\"drag-text\">\r\n      <h3>Drag and Drop file(s)</h3>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"liveCamera\">\r\n  <div style=\"text-align:center\">\r\n    <div>\r\n      <webcam [height]=\"700\" [width]=\"600\" [trigger]=\"triggerObservable\" (imageCapture)=\"handleImage($event)\" *ngIf=\"showWebcam\"\r\n              [allowCameraSwitch]=\"allowCameraSwitch\" [switchCamera]=\"nextWebcamObservable\"\r\n              [videoOptions]=\"videoOptions\"\r\n              [imageQuality]=\"1\"\r\n              (cameraSwitched)=\"cameraWasSwitched($event)\"\r\n              (initError)=\"handleInitError($event)\"\r\n      ></webcam>\r\n      <br/>\r\n      <button class=\"btn btn-default image-preview-clear\" (click)=\"triggerSnapshot();\"><span class=\"glyphicon glyphicon-camera\"></span>Take A Snapshot</button>\r\n      <!-- <button class=\"actionBtn\" (click)=\"toggleWebcam();\">Toggle Webcam</button> -->\r\n      <!-- <br/> -->\r\n      <button class=\"btn btn-default image-preview-clear\" (click)=\"showNextWebcam(true);\" [disabled]=\"!multipleWebcamsAvailable\">Change Camera</button>\r\n      <!-- <input id=\"cameraSwitchCheckbox\" type=\"checkbox\" [(ngModel)]=\"allowCameraSwitch\"><label for=\"cameraSwitchCheckbox\">Allow Camera Switch</label>\r\n      <br/> -->\r\n      <!-- DeviceId: <input id=\"deviceId\" type=\"text\" [(ngModel)]=\"deviceId\" style=\"width: 500px\">\r\n      <button (click)=\"showNextWebcam(deviceId);\">Activate</button> -->\r\n    </div>\r\n  </div>\r\n  <h4 *ngIf=\"errors.length > 0\">Messages:</h4>\r\n  <ul *ngFor=\"let error of errors\">\r\n    <li>{{error | json}}</li>\r\n  </ul>\r\n</div>\r\n\r\n\r\n`,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      // tslint:disable-next-line:no-forward-ref\n      useExisting: forwardRef(() => NgxFileUploaderComponent), multi: true\n    }\n  ]\n})\nexport class NgxFileUploaderComponent implements ControlValueAccessor, OnInit {\n  public urls = new Array<any>();\n  public selectFileType = true;\n  public fileList = new Array<any>();\n  public fileType: string;\n  public message = '';\n  public liveCamera = false;\n  public pdfAvailable = false;\n  public mobile = false;\n  public UploadCaptions = false;\n  @Input() public singleFile: any;\n  @Input() public formEntry: any;\n  public multiple = true;\n  public fileUpload = false;\n  public merge = true;\n  public backButton = false;\n  @Input() public source: any;\n  @Output() public fileChanged: EventEmitter<any> = new EventEmitter();\n  @Output() public uploadData: EventEmitter<any> = new EventEmitter();\n  @Output() public _onClear: EventEmitter<any> = new EventEmitter();\n  public _imagePath: string;\n  public showWebcam = true;\n  public allowCameraSwitch = true;\n  public multipleWebcamsAvailable = false;\n  public deviceId: string;\n  public videoOptions: MediaTrackConstraints = {\n    // width: {ideal: 1024},\n    // height: {ideal: 576}\n  };\n  public errors: WebcamInitError[] = [];\n\n  // latest snapshot\n  public webcamImage: WebcamImage = null;\n\n  // webcam snapshot trigger\n  private trigger: Subject<void> = new Subject<void>();\n  // switch to next / previous / specific webcam; true/false: forward/backwards, string: deviceId\n  private nextWebcam: Subject<boolean | string> = new Subject<boolean | string>();\n  public uploading = false;\n  // The internal data model\n  private innerValue: any = '';\n\n  // Placeholders for the callbacks which are later providesd\n  // by the Control Value Accessor\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: (_: any) => void = noop;\n\n\n  public ngOnInit() {\n    if (this.singleFile) {\n      this.multiple = false;\n    }\n    if (window.screen.width <= 692) { // 768px portrait\n      this.mobile = true;\n    }\n    WebcamUtil.getAvailableVideoInputs()\n      .then((mediaDevices: MediaDeviceInfo[]) => {\n        this.multipleWebcamsAvailable = mediaDevices && mediaDevices.length > 1;\n      });\n  }\n\n  // get accessor\n  get value(): any {\n    return this.innerValue;\n  }\n\n  // set accessor including call the onchange callback\n  set value(v: any) {\n    if (v !== this.innerValue) {\n      this.innerValue = v;\n      this.onChangeCallback(v);\n    }\n  }\n  // Current time string.\n\n  public writeValue(value: any) {\n    if (value !== this.innerValue) {\n      this.innerValue = value;\n    }\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnChange(fn: any) {\n    this.onChangeCallback = fn;\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnTouched(fn: any) {\n    this.onTouchedCallback = fn;\n  }\n\n  public onBlur() {\n    this.onTouchedCallback();\n  }\n\n  public onChange(event: any) {\n    const files = event.srcElement.files;\n    this.uploading = true;\n    // const fileToLoad = files;\n\n    if (files) {\n      for (const file of files) {\n        const fileReader = new FileReader();\n\n        fileReader.onload = (fileLoadedEvent: any) => {\n          const data = fileReader.result;\n          const name = file.name;\n          const fileSize = Math.round(file.size / 1024);\n\n          const payload = {\n            data,\n            id: this.urls.length + 1,\n            name: name,\n            size: fileSize\n          };\n          if (!this.singleFile) {\n            this.urls.push(payload);\n            this.fileList.push(payload);\n          } else {\n            this.fileChanged.emit(payload);\n            this.back();\n          }\n        };\n        fileReader.readAsDataURL(file);\n      }\n\n    }\n  }\n\n  public clear() {\n    this.value = '';\n    this.onChangeCallback(this.value);\n    this.urls = [];\n    this.back();\n    this._onClear.emit();\n  }\n  public back() {\n    this.selectFileType = true;\n    this.urls = [];\n    this.backButton = false;\n    this.fileList = [];\n    this.UploadCaptions = false;\n    this.pdfAvailable = false;\n    this.fileUpload = false;\n    this.liveCamera = false;\n  }\n  public toggleVisibility(filetype: string) {\n    if (filetype === 'image') {\n      this.fileType = 'image/png, image/jpeg, image/gif';\n      this.fileUpload = true;\n\n    } else if (filetype === 'pdf') {\n      this.fileType = 'application/pdf';\n      this.pdfAvailable = true;\n      this.fileUpload = true;\n\n    } else if (filetype === 'both') {\n      this.fileType = 'image/png, image/jpeg, image/gif , application/pdf';\n      this.pdfAvailable = true;\n      this.fileUpload = true;\n    } else if (filetype === 'liveCamera') {\n      this.liveCamera = true;\n    }\n    this.selectFileType = false;\n    this.backButton = true;\n\n  }\n\n  public upload() {\n    if (this.formEntry && !this.pdfAvailable) {\n      this.MergeImages();\n    }\n    this.uploadData.emit(this.fileList);\n    this.back();\n  }\n\n  public MergeImages() {\n    const doc = new jsPDF({ compress: true });\n    doc.page = 1;\n    for (let i = 0; i < this.fileList.length; i++) {\n      const imageData = this.fileList[i].data || this.fileList[i].imageAsDataUrl;\n      doc.addImage(imageData, 'JPG', 10, 10, 190, 270, undefined, 'FAST');\n      doc.setFont('courier');\n      doc.setFontType('normal');\n      doc.text(180, 290, 'page ' + doc.page);\n      doc.page++;\n      if (i < this.fileList.length) {\n        doc.addPage();\n      }\n    }\n    doc.setProperties({\n      title: 'Ampath Medical Data',\n      author: 'POC',\n      creator: 'AMPATH'\n    });\n    doc.deletePage(this.fileList.length + 1);\n    this.fileList = [];\n    this.urls = [];\n    const output = doc.output('datauristring');\n    const re = /filename=generated.pdf;/gi;\n    const data = output.replace(re, '');\n    const payload = {\n      data,\n    };\n    if (this.formEntry) {\n      this.fileList = [];\n      this.urls = [];\n    }\n    this.message = 'The images have been merged into one pdf';\n    this.fileList.push(payload);\n    this.urls.push(payload);\n    this.singleFile = 'true';\n\n  }\n  public delete(urls: any) {\n    for (let i = 0; i <= this.urls.length; i++) {\n      if (urls.data) {\n        if (this.urls[i].data === urls.data) {\n          this.urls.splice(i, 1);\n          this.fileList.splice(i, 1);\n          break;\n        }\n      } else if (urls.imageAsDataUrl) {\n        if (this.urls[i].imageAsDataUrl === urls.imageAsDataUrl) {\n          this.urls.splice(i);\n          this.fileList.splice(i, 1);\n          break;\n        }\n      }\n    }\n    // enabling merge button if remaining on urls is images\n    const re = /pdf/gi;\n    for (let index = 0; index < this.urls.length; index++) {\n      if (this.urls[index].data.search(re) === -1) {\n        this.pdfAvailable = true;\n        break;\n      } else {\n        this.merge = true;\n        this.pdfAvailable = false;\n        this.fileUpload = true;\n      }\n    }\n  }\n  public triggerSnapshot(): void {\n    this.trigger.next();\n  }\n\n  public toggleWebcam(): void {\n    this.showWebcam = !this.showWebcam;\n  }\n\n  public handleInitError(error: WebcamInitError): void {\n    this.errors.push(error);\n  }\n\n  public showNextWebcam(directionOrDeviceId: boolean | string): void {\n    // true => move forward through devices\n    // false => move backwards through devices\n    // string => move to device with given deviceId\n    this.nextWebcam.next(directionOrDeviceId);\n  }\n\n  public handleImage(webcamImage: WebcamImage): void {\n    // console.info('received webcam image', webcamImage);\n    if (this.singleFile) {\n      this.urls = [];\n      this.fileList = [];\n      this.pushData(webcamImage);\n\n    }\n    this.pushData(webcamImage);\n  }\n  public pushData(webcamImage) {\n    this.urls.push(webcamImage);\n    this.fileList.push(webcamImage);\n  }\n\n  public cameraWasSwitched(deviceId: string): void {\n    // console.log('active device: ' + deviceId);\n    this.deviceId = deviceId;\n  }\n\n  public get triggerObservable(): Observable<void> {\n    return this.trigger.asObservable();\n  }\n\n  public get nextWebcamObservable(): Observable<boolean | string> {\n    return this.nextWebcam.asObservable();\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {WebcamModule} from 'ngx-webcam';\r\n\r\nimport { NgxFileUploaderComponent } from './ngx-file-uploader.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule, FormsModule, WebcamModule\r\n  ],\r\n  declarations: [NgxFileUploaderComponent],\r\n  exports: [NgxFileUploaderComponent]\r\n})\r\nexport class NgxFileUploaderModule { }\r\n"]}