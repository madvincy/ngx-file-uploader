{"version":3,"sources":["ng://ngx-file-uploader-ampath2/lib/ngx-file-uploader.service.ts","ng://ngx-file-uploader-ampath2/lib/ngx-file-uploader.component.ts","null","ng://ngx-file-uploader-ampath2/lib/ngx-file-uploader.module.ts"],"names":["NgxFileUploaderService","Injectable","args","providedIn","noop","NgxFileUploaderComponent","this","urls","Array","selectFileType","fileList","message","messageType","liveCamera","pdfAvailable","mobile","UploadCaptions","multiple","fileUpload","both","merge","backButton","fileChanged","EventEmitter","uploadData","_onClear","showWebcam","allowCameraSwitch","multipleWebcamsAvailable","videoOptions","errors","webcamImage","trigger","Subject","nextWebcam","uploading","innerValue","onTouchedCallback","onChangeCallback","prototype","ngOnInit","_this","singleFile","formEntry","window","screen","width","WebcamUtil","getAvailableVideoInputs","then","mediaDevices","length","Object","defineProperty","v","writeValue","value","registerOnChange","fn","registerOnTouched","onBlur","onChange","event","files","srcElement","file","fileReader","FileReader","onload","fileLoadedEvent","data","result","name","fileSize","Math","round","size","setTimeout","back","payload","id","emit","push","readAsDataURL","files_1","__values","o","m","Symbol","iterator","i","call","next","done","tslib_1.__values","files_1_1","clear","toggleVisibility","filetype","fileType","upload","MergeImages","doc","jsPDF","compress","page","imageData","imageAsDataUrl","addImage","undefined","setFont","setFontType","text","addPage","setProperties","title","author","creator","deletePage","output","replace","delete","splice","re","index","search","triggerSnapshot","toggleWebcam","handleInitError","error","showNextWebcam","directionOrDeviceId","handleImage","pushData","cameraWasSwitched","deviceId","asObservable","Component","selector","template","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","Input","Output","NgxFileUploaderModule","NgModule","imports","CommonModule","FormsModule","WebcamModule","declarations","exports"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxFileUploaderService {\r\n\r\n  constructor() { }\r\n}\r\n","import {\n  Component, OnInit, Input, forwardRef,\n  OnChanges, Output, EventEmitter, ÉµConsole\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n// import * as pdfMake from 'pdfmake/build/pdfmake';\nimport jsPDF from 'jspdf';\nimport { Subject } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { WebcamImage, WebcamInitError, WebcamUtil } from 'ngx-webcam';\n\nconst noop = () => {\n  // placeholder call backs\n};\n\n@Component({\n  selector: 'lib-file-uploader',\n  styles: [`.btn-file{position:relative;overflow:hidden}.btn-file input[type=file]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;font-size:100px;text-align:right;opacity:0;outline:0;background:#fff;cursor:inherit;display:block}#img-upload{width:200px}.image-preview-input input[type=file]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-upload{background-color:#fff;width:600px;margin:0 auto;padding:20px}.file-upload-btn{width:100%;margin:0;color:#fff;background:#1fb264;border:none;padding:10px;border-radius:4px;border-bottom:4px solid #15824b;transition:.2s;outline:0;text-transform:uppercase;font-weight:700}ul{list-style-type:none;margin:0;padding:0}.file-upload-btn:hover{background:#1aa059;color:#fff;transition:.2s;cursor:pointer}.file-upload-btn:active{border:0;transition:.2s}.file-upload-content{display:none;text-align:center}.file-upload-input{position:absolute;margin:0;padding:0;width:100%;height:100%;outline:0;opacity:0;cursor:pointer}.image-upload-wrap{margin-top:20px;border:4px dashed #3683c7;position:relative}.image-dropping,.image-upload-wrap:hover{background-color:#337ab7;border:4px dashed #fff}.image-title-wrap{padding:0 15px 15px;color:#222}.drag-text{text-align:center}.drag-text h3{font-weight:100;text-transform:uppercase;color:#155a82;padding:60px 0}.file-upload-image{max-height:200px;max-width:200px;margin:auto;padding:20px}.button{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-color:#004a7f;border:none;color:#fff;text-decoration:none;-webkit-animation:1.5s infinite glowing;animation:1.5s infinite glowing}@-webkit-keyframes glowing{0%{background-color:#002fb2;-webkit-box-shadow:0 0 3px #005cb2}50%{background-color:#203864;-webkit-box-shadow:0 0 40px #203864}100%{background-color:#005cb2;-webkit-box-shadow:0 0 3px #005cb2}}@keyframes glowing{0%,100%{background-color:#005cb2;box-shadow:0 0 3px #005cb2}50%{background-color:#203864;box-shadow:0 0 40px #203864}}.actionBtn{margin-top:5px;margin-bottom:2px;font-size:1.2em}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700;margin-right:10px}.row-cb{margin:auto;font-size:15px}.row-cb label{float:left}.row-cb span{float:left;text-align:left}.snapshot{text-align:center}.snapshot img{max-width:800px;max-height:800px}.columne#caption .text h1{margin:0;color:#fff}.columne#caption:hover .text{opacity:1;cursor:pointer;opacity:1}.columne#caption{position:relative}.columne#caption .text{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10;opacity:0;transition:.8s}.columne#caption:hover img{-webkit-filter:blur(4px);filter:blur(4px)}@media (max-width:629px){.file-upload-input{display:none!important}}`],\n  template: `<div *ngIf=\"message\" class=\"alert alert-{{messageType}} alert-dismissible\" role=\"alert\">\r\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span\r\n        aria-hidden=\"true\">&times;</span></button> {{message}}\r\n  </div>\r\n<div *ngIf=\"backButton\">\r\n  <button class=\"btn btn-default image-preview-primary\" type=\"button\" (click)=\"back()\" >\r\n    <span class=\"glyphicon glyphicon-circle-arrow-left\"></span> Back\r\n</button>\r\n</div>\r\n<div *ngIf=\"selectFileType\" class=\"panel panel-primary\">\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n            {{value}} \r\n            <button *ngIf=\"value\" type=\"button\" (click)=\"clear()\" class=\"btn btn-default image-preview-clear\">\r\n                <span class=\"glyphicon glyphicon-remove\"></span> Clear</button>\r\n        </div>\r\n      </div>\r\n  <div class=\"panel-heading\">UPLOAD FILE TYPE</div>\r\n  <div class=\"panel-body\">\r\n    <div class=\"row-cb\">\r\n      <span><input name=\"image\" id=\"ima\" (change)=\"toggleVisibility('image')\" type=\"checkbox\" /></span>\r\n      <label for=\"ima\">Image</label>\r\n\r\n      <div class=\"clear-both\"></div>\r\n</div>\r\n<div class=\"row-cb\">\r\n  <span><input name=\"option\" id=\"pdf\" (change)=\"toggleVisibility('pdf')\" type=\"checkbox\" /></span>\r\n  <label for=\"pdf\">PDF</label>\r\n\r\n  <div class=\"clear-both\"></div>\r\n</div>\r\n<div *ngIf=\"both\" class=\"row-cb\">\r\n  <span><input name=\"option\" id=\"both\" (change)=\"toggleVisibility('both')\" type=\"checkbox\" /></span>\r\n  <label  for=\"both\">Image & PDF</label>\r\n\r\n  <div class=\"clear-both\"></div>\r\n</div>\r\n<div class=\"row-cb\">\r\n  <span><input name=\"camera\" id=\"camera\" (change)=\"toggleVisibility('liveCamera')\" type=\"checkbox\" /></span>\r\n  <label for=\"camera\" >Live Camera</label>\r\n\r\n  <div class=\"clear-both\"></div>\r\n</div>\r\n  </div>\r\n</div>\r\n<div [hidden]=\"!urls[0]\" class=\"panel panel-primary\">\r\n  <div class=\"panel-heading\">SELECTED FILES</div>\r\n  <div class=\"panel-body\">\r\n      <div style=\"display: inline-block;\" *ngFor=\"let url of urls;let i=index\">\r\n          <a class = \"columne\" id = \"caption\">\r\n           <img style=\" border: 1px solid rgb(97, 97, 97); margin: 2px; border-radius: 4px;padding: 5px;\" id=\"img{{i}}\" [src]=\"url.data || url.imageAsDataUrl\" \r\n           onError=\"this.onerror=null;this.src='https://store-images.s-microsoft.com/image/apps.34961.13510798887621962.47b62c4c-a0c6-4e3c-87bb-509317d9c364.a6354b48-c68a-47fa-b69e-4cb592d42ffc?mode=scale&q=90&h=300&w=300' ;\" class=\"rounded mb-3\" width=\"100\" height=\"200\">\r\n           <div class=\"text\"><h2 title=\"Click to Delete File {{url.name}}\" (click)=\"delete(url)\"  style=\"color: red; font-family: fantasy;\"><span class=\"glyphicon glyphicon-trash\"></span>REMOVE</h2></div>\r\n          </a>\r\n         </div>\r\n    </div>\r\n    <div class=\"panel-footer\">\r\n        <button *ngIf=\"UploadCaptions\" type=\"button\" (click)=\"upload()\" class=\"button pull-right\">\r\n            <span class=\"glyphicon glyphicon-upload\"></span> Upload Files\r\n        </button>\r\n        <button *ngIf=\"!pdfAvailable && fileUpload || liveCamera || merge\" type=\"button\" [disabled]=\"!urls[1]\" (click)=\"MergeImages()\"  title=\"merge the images as pages in one pdf document\"  class=\"btn btn-default image-preview-clear\">\r\n          <span class=\"glyphicon glyphicon-upload\"></span> Merge Files\r\n        </button>\r\n    </div>\r\n</div>\r\n<div *ngIf=\"fileUpload\">\r\n\r\n  <div class=\"input-group\">\r\n    <input type=\"text\" class=\"form-control\" readonly [(ngModel)]=\"value\">\r\n    <div class=\"input-group-btn\">\r\n\r\n      <div class=\"btn btn-default image-preview-input\">\r\n        <span class=\"glyphicon glyphicon-folder-open\"></span>\r\n        <span class=\"image-preview-input-title\">SELECT FILE</span>\r\n        <input *ngIf=\"multiple\" type=\"file\" multiple accept=\"{{fileType}}\" (blur)=\"onBlur()\" name=\"input-file-preview\" (change)=\"onChange($event)\"\r\n        /> \r\n        <input *ngIf=\"!multiple\" type=\"file\" accept=\"{{fileType}}\" (blur)=\"onBlur()\" name=\"input-file-preview\" (change)=\"onChange($event)\"\r\n        /> \r\n      </div>\r\n      <button *ngIf=\"value\" type=\"button\" (click)=\"clear()\" class=\"btn btn-default image-preview-clear\">\r\n                        <span class=\"glyphicon glyphicon-remove\"></span> Clear\r\n    </button>\r\n    <button type=\"button\" (click)=\"upload()\" class=\"button\">\r\n      <span class=\"glyphicon glyphicon-upload\"></span> Upload\r\n</button>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"!mobile\" class=\"image-upload-wrap\">\r\n    <input *ngIf=\"multiple\" class=\"file-upload-input\" type='file' (change)=\"onChange($event)\" multiple accept=\"{{fileType}}\" />\r\n    <input *ngIf=\"!multiple\" class=\"file-upload-input\" type='file' (change)=\"onChange($event)\" accept=\"{{fileType}}\" />\r\n    <div class=\"drag-text\">\r\n      <h3>Drag and Drop file(s)</h3>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"liveCamera\">\r\n  <div style=\"text-align:center\">\r\n    <div>\r\n      <webcam [height]=\"700\" [width]=\"600\" [trigger]=\"triggerObservable\" (imageCapture)=\"handleImage($event)\" *ngIf=\"showWebcam\"\r\n              [allowCameraSwitch]=\"allowCameraSwitch\" [switchCamera]=\"nextWebcamObservable\"\r\n              [videoOptions]=\"videoOptions\"\r\n              [imageQuality]=\"1\"\r\n              (cameraSwitched)=\"cameraWasSwitched($event)\"\r\n              (initError)=\"handleInitError($event)\"\r\n      ></webcam>\r\n      <br/>\r\n      <button class=\"btn btn-default image-preview-clear\" (click)=\"triggerSnapshot();\"><span class=\"glyphicon glyphicon-camera\"></span>Take A Snapshot</button>\r\n      <!-- <button class=\"actionBtn\" (click)=\"toggleWebcam();\">Toggle Webcam</button> -->\r\n      <!-- <br/> -->\r\n      <button class=\"btn btn-default image-preview-clear\" (click)=\"showNextWebcam(true);\" [disabled]=\"!multipleWebcamsAvailable\">Change Camera</button>\r\n      <!-- <input id=\"cameraSwitchCheckbox\" type=\"checkbox\" [(ngModel)]=\"allowCameraSwitch\"><label for=\"cameraSwitchCheckbox\">Allow Camera Switch</label>\r\n      <br/> -->\r\n      <!-- DeviceId: <input id=\"deviceId\" type=\"text\" [(ngModel)]=\"deviceId\" style=\"width: 500px\">\r\n      <button (click)=\"showNextWebcam(deviceId);\">Activate</button> -->\r\n    </div>\r\n  </div>\r\n  <h4 *ngIf=\"errors.length > 0\">Messages:</h4>\r\n  <ul *ngFor=\"let error of errors\">\r\n    <li>{{error | json}}</li>\r\n  </ul>\r\n</div>\r\n\r\n\r\n`,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      // tslint:disable-next-line:no-forward-ref\n      useExisting: forwardRef(() => NgxFileUploaderComponent), multi: true\n    }\n  ]\n})\nexport class NgxFileUploaderComponent implements ControlValueAccessor, OnInit {\n  public urls = new Array<any>();\n  public selectFileType = true;\n  public fileList = new Array<any>();\n  public fileType: string;\n  public message = '';\n  public messageType = '';\n  public liveCamera = false;\n  public pdfAvailable = false;\n  public mobile = false;\n  public UploadCaptions = false;\n  @Input() public singleFile: any;\n  @Input() public formEntry: any;\n  public multiple = true;\n  public fileUpload = false;\n  public both = true;\n  public merge = false;\n  public backButton = false;\n  @Input() public source: any;\n  @Output() public fileChanged: EventEmitter<any> = new EventEmitter();\n  @Output() public uploadData: EventEmitter<any> = new EventEmitter();\n  @Output() public _onClear: EventEmitter<any> = new EventEmitter();\n  public _imagePath: string;\n  public showWebcam = true;\n  public allowCameraSwitch = true;\n  public multipleWebcamsAvailable = false;\n  public deviceId: string;\n  public videoOptions: MediaTrackConstraints = {\n    // width: {ideal: 1024},\n    // height: {ideal: 576}\n  };\n  public errors: WebcamInitError[] = [];\n\n  // latest snapshot\n  public webcamImage: WebcamImage = null;\n\n  // webcam snapshot trigger\n  private trigger: Subject<void> = new Subject<void>();\n  // switch to next / previous / specific webcam; true/false: forward/backwards, string: deviceId\n  private nextWebcam: Subject<boolean | string> = new Subject<boolean | string>();\n  public uploading = false;\n  // The internal data model\n  private innerValue: any = '';\n\n  // Placeholders for the callbacks which are later providesd\n  // by the Control Value Accessor\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: (_: any) => void = noop;\n\n\n  public ngOnInit() {\n    if (this.singleFile) {\n      this.multiple = false;\n      this.both = false;\n    } else if (this.formEntry) {\n      this.both = false;\n    }\n    if (window.screen.width <= 692) { // 768px portrait\n      this.mobile = true;\n    }\n    WebcamUtil.getAvailableVideoInputs()\n      .then((mediaDevices: MediaDeviceInfo[]) => {\n        this.multipleWebcamsAvailable = mediaDevices && mediaDevices.length > 1;\n      });\n  }\n\n  // get accessor\n  get value(): any {\n    return this.innerValue;\n  }\n\n  // set accessor including call the onchange callback\n  set value(v: any) {\n    if (v !== this.innerValue) {\n      this.innerValue = v;\n      this.onChangeCallback(v);\n    }\n  }\n  // Current time string.\n\n  public writeValue(value: any) {\n    if (value !== this.innerValue) {\n      this.innerValue = value;\n    }\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnChange(fn: any) {\n    this.onChangeCallback = fn;\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnTouched(fn: any) {\n    this.onTouchedCallback = fn;\n  }\n\n  public onBlur() {\n    this.onTouchedCallback();\n  }\n\n  public onChange(event: any) {\n    const files = event.srcElement.files;\n    this.uploading = true;\n    // const fileToLoad = files;\n\n    if (files) {\n      for (const file of files) {\n        const fileReader = new FileReader();\n\n        fileReader.onload = (fileLoadedEvent: any) => {\n          const data = fileReader.result;\n          const name = file.name;\n          const fileSize = Math.round(file.size / 1024);\n          if (fileSize >= 3000) {\n            this.message = 'File Too large';\n            this.messageType = 'danger';\n            setTimeout(() => {\n              this.message = '';\n            }, 3000);\n            this.back();\n          } else {\n            const payload = {\n              data,\n              id: this.urls.length + 1,\n              name: name,\n              size: fileSize\n            };\n            if (!this.singleFile) {\n              this.urls.push(payload);\n              this.fileList.push(payload);\n            } else {\n              this.fileChanged.emit(payload);\n              this.back();\n            }\n          }\n        };\n        fileReader.readAsDataURL(file);\n      }\n\n    }\n  }\n\n  public clear() {\n    this.value = '';\n    this.onChangeCallback(this.value);\n    this.urls = [];\n    this.back();\n    this._onClear.emit();\n  }\n  public back() {\n    this.selectFileType = true;\n    this.urls = [];\n    this.backButton = false;\n    this.fileList = [];\n    this.UploadCaptions = false;\n    this.singleFile = false;\n    this.pdfAvailable = false;\n    this.merge = false;\n    this.fileUpload = false;\n    this.liveCamera = false;\n  }\n  public toggleVisibility(filetype: string) {\n    if (filetype === 'image') {\n      this.fileType = 'image/png, image/jpeg, image/gif';\n      this.fileUpload = true;\n\n    } else if (filetype === 'pdf') {\n      if (this.formEntry) {\n        this.multiple = false;\n      }\n      this.fileType = 'application/pdf';\n      this.pdfAvailable = true;\n      this.fileUpload = true;\n\n    } else if (filetype === 'both') {\n      this.fileType = 'image/png, image/jpeg, image/gif , application/pdf';\n      this.pdfAvailable = true;\n      this.fileUpload = true;\n    } else if (filetype === 'liveCamera') {\n      this.liveCamera = true;\n    }\n    this.selectFileType = false;\n    this.backButton = true;\n    if (this.value) {\n     this.clear();\n    }\n\n  }\n\n  public upload() {\n    this.uploadData.emit(this.fileList);\n    this.back();\n  }\n\n  public MergeImages() {\n    const doc = new jsPDF({ compress: true });\n    doc.page = 1;\n    for (let i = 0; i < this.fileList.length; i++) {\n      const imageData = this.fileList[i].data || this.fileList[i].imageAsDataUrl;\n      doc.addImage(imageData, 'JPG', 10, 10, 190, 270, undefined, 'FAST');\n      doc.setFont('courier');\n      doc.setFontType('normal');\n      doc.text(180, 290, 'page ' + doc.page);\n      doc.page++;\n      if (i < this.fileList.length) {\n        doc.addPage();\n      }\n    }\n    doc.setProperties({\n      title: 'Ampath Medical Data',\n      author: 'POC',\n      creator: 'AMPATH'\n    });\n    doc.deletePage(this.fileList.length + 1);\n    this.fileList = [];\n    this.urls = [];\n    const output = doc.output('datauristring');\n    const re = /filename=generated.pdf;/gi;\n    const data = output.replace(re, '');\n    const payload = {\n      data,\n    };\n    if (this.formEntry) {\n      this.fileList = [];\n      this.urls = [];\n    }\n    this.message = 'The images have been merged into one pdf, You can now upload';\n    this.messageType = 'success';\n    setTimeout(() => {\n      this.message = '';\n    }, 3000);\n    this.fileList.push(payload);\n    this.urls.push(payload);\n    this.singleFile = false;\n    this.UploadCaptions = true;\n\n  }\n  public delete(urls: any) {\n    for (let i = 0; i <= this.urls.length; i++) {\n      if (urls.data) {\n        if (this.urls[i].data === urls.data) {\n          this.urls.splice(i, 1);\n          this.fileList.splice(i, 1);\n          break;\n        }\n      } else if (urls.imageAsDataUrl) {\n        if (this.urls[i].imageAsDataUrl === urls.imageAsDataUrl) {\n          this.urls.splice(i);\n          this.fileList.splice(i, 1);\n          break;\n        }\n      }\n    }\n    // enabling merge button if remaining on urls is images\n    const re = /pdf/gi;\n    for (let index = 0; index < this.urls.length; index++) {\n      if (this.urls[index].data.search(re) === -1) {\n        this.pdfAvailable = true;\n        break;\n      } else {\n        this.merge = true;\n        this.pdfAvailable = false;\n        this.fileUpload = true;\n      }\n    }\n  }\n  public triggerSnapshot(): void {\n    this.trigger.next();\n  }\n\n  public toggleWebcam(): void {\n    this.showWebcam = !this.showWebcam;\n  }\n\n  public handleInitError(error: WebcamInitError): void {\n    this.errors.push(error);\n  }\n\n  public showNextWebcam(directionOrDeviceId: boolean | string): void {\n    // true => move forward through devices\n    // false => move backwards through devices\n    // string => move to device with given deviceId\n    this.nextWebcam.next(directionOrDeviceId);\n  }\n\n  public handleImage(webcamImage: WebcamImage): void {\n    // console.info('received webcam image', webcamImage);\n    if (this.singleFile) {\n      this.urls = [];\n      this.fileList = [];\n      this.pushData(webcamImage);\n\n    }\n    this.pushData(webcamImage);\n  }\n  public pushData(webcamImage) {\n    this.urls.push(webcamImage);\n    this.fileList.push(webcamImage);\n  }\n\n  public cameraWasSwitched(deviceId: string): void {\n    // console.log('active device: ' + deviceId);\n    this.deviceId = deviceId;\n  }\n\n  public get triggerObservable(): Observable<void> {\n    return this.trigger.asObservable();\n  }\n\n  public get nextWebcamObservable(): Observable<boolean | string> {\n    return this.nextWebcam.asObservable();\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {WebcamModule} from 'ngx-webcam';\r\n\r\nimport { NgxFileUploaderComponent } from './ngx-file-uploader.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule, FormsModule, WebcamModule\r\n  ],\r\n  declarations: [NgxFileUploaderComponent],\r\n  exports: [NgxFileUploaderComponent]\r\n})\r\nexport class NgxFileUploaderModule { }\r\n"]}